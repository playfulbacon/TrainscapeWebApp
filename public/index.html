<html>

  <head>
  <title>Trainscape</title>
  <link rel="stylesheet" href="css/simple.css"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>

  <body>
  
    <div class="connect" id="connect">
      <div class="message"><p>Welcome Hacker,<br> Please enter your Hacker ID to connect with your agent.</p></div>
      
      <div style="margin-top:20px;">
      <input class="hackerid" type="text" id="room-code-input" placeholder="HACKER ID" maxlength="4" style="text-transform:uppercase" />
      <button id="connect-button">CONNECT</button>
      </div>
    </div>
   
    <div class="connect" id="waiting-for-start">
      <div><p>Connected!<br><br> Waiting for your agent to start the game...</p></div>
    </div>

    <button id="back-button">&lt; BACK</button>


    <div class= "navigator" id="navigator">
      <h1 id="wagon-name">WAGON NAME</h1>
      <p>Hackable Objects</p>
      <table id="navigator-buttons"> </table>
    </div>

    <div id="game-content"></div>

    <pre id="messages" hidden></pre>

  </body>

  <script>  

  // move all this into main.js

  var ws = new WebSocket(location.origin.replace(/^http/, 'ws'));
  var hackables = new Map();
  var currentHackableId;

  function selectHackable(id){
    console.log('select hackable: ' + id);

    document.querySelector('#navigator').style.display = "none";
    document.querySelector('#' + id).style.display = "block";
    document.querySelector('#back-button').style.display = "block";

    currentHackableId = id;
  }

  function returnToNavigator(){
    document.querySelector('#navigator').style.display = "block";
    document.querySelector('#' + currentHackableId).style.display = "none";
    document.querySelector('#back-button').style.display = "none";

    ws.send(JSON.stringify({messageType: currentHackableId + '_DESELECTED'}));
  }

  function selectPuzzle(puzzleId){
    selectHackable(puzzleId);

    ws.send(JSON.stringify({messageType: puzzleId + '_SELECTED'}));
  }

  function missionStarted() {
    document.querySelector('#connect').style.display = "none";
    document.querySelector('#waiting-for-start').style.display = "none";
    document.querySelector('#navigator').style.display = "block";
  }

  </script>

  <script src="js/hackable.js"></script>
  <script src="js/puzzle.js"></script>

  <script src="js/bot.js"></script>
  <script src="js/bot-setup.js"></script>

  <!--LIST OF PUZZLES-->
  <script src="js/puzzle-debriefcase.js"></script>
  <script src="js/puzzle-storage-box.js"></script>
  <script src="js/puzzle-drink-dispenser.js"></script>
  <script src="js/puzzle-door-panel.js"></script>
  <script src="js/puzzle-example.js"></script>
  <script src="js/info-passengers-list.js"></script>
  <script src="js/puzzle-train-settings.js"></script>
  <script src="js/puzzle-luggage-combo-lock.js"></script>
  <script src="js/main.js"></script>

  <script>
    new Puzzle("Wagon_1_A");
    new Puzzle("Wagon_1_B");
    new Puzzle("Wagon_1_C");

    new Puzzle("Wagon_2_A");
    new Puzzle("Wagon_2_B");
    new Puzzle("Wagon_2_C");

    new Puzzle("Wagon_3_A");
    new Puzzle("Wagon_3_B");
    new Puzzle("Wagon_3_C");
  </script>

</html>